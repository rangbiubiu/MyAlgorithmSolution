## ç®€è¿°

##### 1. ä¸‰ç§ä½çº§æ’åº

- å†’æ³¡æ’åºï¼šæ¯ä¸€è¶Ÿä¸¤ä¸¤äº¤æ¢ï¼Œå°†æœ€å°çš„å…ƒç´ æµ®åˆ°æœ€å‰é¢(æˆ–è€…å°†æœ€å¤§å…ƒç´ æ²‰åˆ°æœ€åé¢)ã€‚
- é€‰æ‹©æ’åºï¼šæ¯ä¸€è¶Ÿé€‰å‡ºä¸€ä¸ªæœ€å°å€¼ï¼Œæ”¾åˆ°å‰é¢
- æ’å…¥æ’åºï¼šä¸æ–­ä»åé¢é€‰ä¸€ä¸ªæ•°ï¼Œç„¶åæ’å…¥åˆ°å‰é¢å·²ç»æœ‰åºçš„åºåˆ—é‡Œï¼ˆ**æ‰“æ‰‘å…‹ç‰Œ**ï¼‰
- ï¼ˆå¸Œå°”æ’åºï¼‰ï¼šåˆ†ç»„çš„æ’å…¥æ’åº

> é€‰æ‹©å’Œå†’æ³¡æ’åº**ç¬¬iè¶Ÿä¼šæ”¾ç½®å¥½ç¬¬iå¤§æˆ–ç¬¬iå°çš„å…ƒç´ **

##### 2. ä¸‰ç§é«˜çº§æ’åº

- å¿«é€Ÿæ’åºï¼šæ¯ä¸€æ¬¡éƒ½æ’å®šä¸€ä¸ªå…ƒç´ ï¼ˆè¿™ä¸ªå…ƒç´ å‘†åœ¨äº†å®ƒæœ€ç»ˆåº”è¯¥å‘†çš„ä½ç½®ï¼‰ï¼Œç„¶åé€’å½’åœ°å»æ’å®ƒå·¦è¾¹çš„éƒ¨åˆ†å’Œå³è¾¹çš„éƒ¨åˆ†
- å½’å¹¶æ’åºï¼šå€ŸåŠ©é¢å¤–ç©ºé—´åˆ†è€Œæ²»ä¹‹å†åˆå¹¶ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œå¾—åˆ°æ›´é•¿çš„æœ‰åºæ•°ç»„ã€‚ä¾‹[lc88.åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„](https://leetcode-cn.com/problems/merge-sorted-array/)ã€‚
- å †æ’åº

##### 3ã€topké—®é¢˜

- å †æ’åº 
- å¿«é€Ÿæ’åº 

##### 4ã€å…¶ä½™

- è®¡æ•°æ’åº
- åŸºæ•°æ’åº
- æ¡¶æ’åº

## è¯¦è§£

### å¿«é€Ÿæ’åº

#### åŸºæœ¬æ€æƒ³

![image-20240212183048975](C:\Users\Oscar\AppData\Roaming\Typora\typora-user-images\image-20240212183048975.png)

> ã€Œå¿«é€Ÿæ’åºã€ä¸ã€Œå½’å¹¶æ’åºã€æ¯”è¾ƒ
>
> - éƒ½ä½¿ç”¨äº†ã€Œåˆ†è€Œæ²»ä¹‹ï¼Œçš„æ€æƒ³
> - ã€Œå½’å¹¶æ’åºã€æ— å·®åˆ«å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œç„¶åä¸åœåœ°ã€Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ã€
> - ã€Œå¿«é€Ÿæ’åºã€åœ¨ã€Œåˆ†ã€è¿™ä»¶äº‹æƒ…ä¸Šåšè¶³äº†æ–‡ç« ï¼Œæ²¡æœ‰ã€Œåˆå¹¶ã€çš„è¿‡ç¨‹
> - æ³¨æ„ï¼šå®ç°å½’å¹¶æ’åºçš„æ—¶å€™ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œä¸è¦æŠŠè¿™ä¸ªç®—æ³•å®ç°æˆéç¨³å®šæ’åºï¼ŒåŒºåˆ«å°±åœ¨ <= å’Œ < ï¼Œå·²åœ¨ä»£ç ä¸­æ³¨æ˜ã€‚
>     ã€Œå½’å¹¶æ’åºã€æ¯”ã€Œå¿«é€Ÿæ’åºã€å¥½çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒå€ŸåŠ©äº†é¢å¤–ç©ºé—´ï¼Œå¯ä»¥å®ç°ã€Œç¨³å®šæ’åºã€

#### (1) åŸå§‹å¿«æ’

ä¼ªç 

```c++
//å¿«æ’ä¸»å‡½æ•°, å¯¹æ•°ç»„numsé€’å½’è°ƒç”¨quickSortå‡½æ•°, å®ç°æ•°ç»„çš„æœ‰åºæ’åˆ—
void quickSort(vector<int>& nums, int left, int right) 
    é€’å½’ç»“æŸæ¡ä»¶: left >= right
    å•æ¬¡é€’å½’æ‰§è¡Œé€»è¾‘: 
    (1)è°ƒç”¨partition()åˆ’åˆ†åŒºé—´, å°†åŒºé—´åˆ†æˆä¸¤éƒ¨åˆ†:[left,pivotIndex)å’Œ(pivotIndex,right], partition()è¿”å›å€¼æ˜¯è¯¥æ¬¡åˆ’åˆ†é€‰æ‹©çš„åŸºå‡†å…ƒç´ çš„ä¸‹æ ‡pivotIndex;
      åˆ’åˆ†å®Œæˆåå°äºç­‰äºpivotçš„éƒ½åœ¨pivotIndexå·¦è¾¹, å¤§äºpivotçš„éƒ½åœ¨pivotIndexå³è¾¹
    (2)æ¥ç€å¯¹è¿™ä¸¤ä¸ªåŒºé—´[left,pivotIndex)å’Œ(pivotIndex,right]åˆ†åˆ«è°ƒç”¨é€’å½’å‡½æ•°
            
int partition(vector<int>& nums, int left, int right)  
    (1)åœ¨åŒºé—´ä¸­å–ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å…ƒç´ nums[pivotIndex].(åŸå§‹å¿«æ’æ˜¯å–åŒºé—´ç¬¬ä¸€ä¸ªå…ƒç´ )
    (2)æ ¹æ®å€¼æ˜¯ å°äºç­‰äºorå¤§äº åŸºå‡†å…ƒç´ æ¥åˆ’åˆ†åŒºé—´ï¼š
    ç”¨ j æŒ‡å‘å·¦åŒºé—´çš„æœ€åä¸€ä¸ªä½ç½®, ç”¨ i éå†æ•´ä¸ªåŒºé—´, åˆ†åˆ«åˆå§‹åŒ–ä¸ºj=left,i=j+1;
    for (int i = j + 1; i <= right; ++i) 
        if nums[i] <= pivot, è¯´æ˜nums[i]åº”è¯¥æ”¾åœ¨å·¦åŒºé—´. åˆ™åº”
          ã€1ã€‘ j++å°†å·¦åŒºé—´çš„å³è¾¹ç•Œå³ç§»ä¸€ä½, æ‰©å¤§å·¦åŒºé—´
          ã€2ã€‘ å°†nums[i]ä¸nums[j]äº¤æ¢ä½ç½®, è®©nums[i]åˆ°å·¦åŒºé—´æœ€åä¸€ä¸ªä½ç½®
    (3)äº¤æ¢åŸºå‡†å…ƒç´ nums[left]å’Œå·¦åŒºé—´æœ€åä¸€ä¸ªä½ç½®nums[j], è®©åŸºå‡†å…ƒç´ ä½äºä¸¤åŒºé—´çš„åˆ†å‰²ä½ç½®
    (4)è¿”å›åŸºå‡†å…ƒç´ æ‰€åœ¨ä½ç½®
```

```c++
class Solution {
public:
    int partition(vector<int>& nums, int left, int right) { 
        int pivot = nums[left];
        int j = left;
        for (int i = j + 1; i <= right; ++i) {
            if (nums[i] <= pivot) swap(nums[i], nums[++j]);
        }
        swap(nums[left], nums[j]);
        return j;
    }
    
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        int pivotIndex = partition(nums, left, right);
        quickSort(nums, left, pivotIndex - 1);
        quickSort(nums, pivotIndex + 1, right);
    }
    
    vector<int> sortArray(vector<int>& nums) {
        quickSort(nums, 0, nums.size() - 1);
        return nums;
    }
};
```

##### å­˜åœ¨é—®é¢˜

åŸå§‹å¿«æ’æ˜¯æ— æ³•AC  [912. æ’åºæ•°ç»„](https://leetcode.cn/problems/sort-an-array/)  çš„ï¼Œè¿‡ä¸äº†`nums ={1,2,3,4,5,1,1,1,1,1,Â·Â·Â·Â·,1,1,1},k = 50000`è¿™ç§ç‰¹æ®Šæµ‹è¯•æ¡ˆä¾‹ã€‚
é—®é¢˜ï¼šå–åŒºé—´ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºpivotä¼šå¯¼è‡´**partitionåœ¨é¡ºåºæ•°ç»„æˆ–é€†åºæ•°ç»„ä¸Šè¡¨ç°å¾ˆå·®**ã€‚
å¦‚ä¸‹å·¦å›¾æ‰€ç¤ºï¼Œæ¯ä¸€æ¬¡å‚ä¸æ¯”è¾ƒçš„å…ƒç´ ä¸èƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°‘ï¼Œæ‹†åˆ†çš„å­é—®é¢˜çš„è§„æ¨¡åªæ¯”åŸæ¥å‡å°‘äº†1ä¸ªå…ƒç´ ã€‚å¯¼è‡´é€’å½’æ ‘éå¸¸ä¸å¹³è¡¡ï¼ˆé€’å½’æ ‘å€¾æ–œï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N^2^)ï¼Œç­‰åŒäºå†’æ³¡æ’åºæˆ–è€…ã€Œé€‰æ‹©æ’åºã€

##### è§£å†³åŠæ³•

éšæœºé€‰æ‹© pivotï¼Œæ‰“ç ´é¡ºåºæ€§

![image-20240213095627215](https://cdn.jsdelivr.net/gh/808bass666/picBed@main/202402130956264.png)

#### (2) éšæœºé€‰æ‹©pivot

ä¸»è¦æ·»åŠ ä¸¤ä¸ªåœ°æ–¹

```c++
// 1. æ·»åŠ éšæœºæ•°ç§å­
srand((unsigned)time(nullptr));
// 2. ç”¨rand()ç”Ÿæˆéšæœºæ•°
int partition(vector<int>& nums, int left, int right) {  
    // è¦ç”Ÿæˆçš„éšæœºä¸‹æ ‡çš„èŒƒå›´åœ¨left~rightä¹‹é—´
    int randomIndex = rand() % (right - left + 1) + left;
    // rand() % (right - left + 1)        :ç”Ÿæˆ 0        ~ (right - left)       çš„éšæœºæ•°
    // rand() % (right - left + 1) + left :ç”Ÿæˆ 0 + left ~ (right - left) + leftçš„éšæœºæ•°
    swap(nums[left], nums[randomIndex]);
	Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·
}
```

å®Œæ•´ä»£ç 

```c++
class Solution {
public:
    int partition(vector<int>& nums, int left, int right) {  
        // è¦ç”Ÿæˆçš„éšæœºä¸‹æ ‡çš„èŒƒå›´åœ¨left~rightä¹‹é—´
        int randomIndex = rand() % (right - left + 1) + left;
        // rand() % (right - left + 1)        :ç”Ÿæˆ 0        ~ (right - left)       çš„éšæœºæ•°
        // rand() % (right - left + 1) + left :ç”Ÿæˆ 0 + left ~ (right - left) + leftçš„éšæœºæ•°
        swap(nums[left], nums[randomIndex]);
        int pivot = nums[left];
        
        int j = left;
        for (int i = j + 1; i <= right; ++i) {
            if (nums[i] <= pivot) swap(nums[i], nums[++j]);
        }
        swap(nums[left], nums[j]);
        return j;
    }
    
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        int pivotIndex = partition(nums, left, right);
        quickSort(nums, left, pivotIndex - 1);
        quickSort(nums, pivotIndex + 1, right);
    }
    
    vector<int> sortArray(vector<int>& nums) {
        srand((unsigned)time(nullptr));//æ·»åŠ éšæœºæ•°ç§å­
        quickSort(nums, 0, nums.size() - 1);
        return nums;
    }
};
```

##### å­˜åœ¨é—®é¢˜

éšæœºé€‰æ‹©pivotå¯¹æ•°ç»„ä¸­æœ‰å¤§é‡é‡å¤å…ƒç´ çš„ç”¨ä¾‹å¤±æ•ˆï¼ï¼æŠŠç­‰äºpivotçš„æ‰€æœ‰å…ƒç´ åˆ†åˆ°äº†æ•°ç»„çš„åŒä¸€ä¾§ï¼ˆä¸Šé¢æ˜¯æŠŠå®ƒä»¬éƒ½åˆ†åˆ°äº†å·¦åŒºé—´ï¼‰ï¼Œå¯èƒ½ä¼šé€ æˆé€’å½’æ ‘å€¾æ–œ

##### è§£å†³åŠæ³•

äºŒè·¯å¿«æ’æˆ–ä¸‰è·¯å¿«æ’ã€‚

- äºŒè·¯å¿«æ’ï¼šæŠŠç­‰äºpivotçš„æ‰€æœ‰å…ƒç´ **ç­‰æ¦‚ç‡**åœ°åˆ†åˆ°æ•°ç»„çš„ä¸¤ä¾§ï¼Œé¿å…äº†é€’å½’æ ‘å€¾æ–œï¼Œé€’å½’æ ‘ç›¸å¯¹å¹³è¡¡ï¼›
- ä¸‰è·¯å¿«æ’ï¼šæŠŠç­‰äºpivotçš„æ‰€æœ‰å…ƒç´ æŒ¤åˆ°äº†æ•°ç»„çš„ä¸­é—´ï¼Œåœ¨æœ‰å¾ˆå¤šå…ƒç´ å’Œåˆ‡åˆ†å…ƒç´ ç›¸ç­‰çš„æƒ…å†µä¸‹ï¼Œé€’å½’åŒºé—´å¤§å¤§å‡å°‘ã€‚

#### (3) äºŒè·¯å¿«æ’

**:small_red_triangle_down:  steps: ** `partition()` å°†åŒºé—´åˆ’åˆ†æˆ <= pivot å’Œ >= pivotçš„ä¸¤éƒ¨åˆ†

1.  éšæœºé€‰å–pivotï¼Œå¹¶æŠŠé€‰å–çš„å€¼ä¸nums[left]äº¤æ¢
1.  è®©ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»åŒºé—´ä¸¤ç«¯å¾€ä¸­é—´éå†
1.  å½“å·¦æŒ‡é’ˆé‡åˆ°>=pivotçš„å€¼æ—¶ï¼Œåœä¸‹
1.  æ¥ç€å³æŒ‡é’ˆå¼€å§‹éå†ï¼Œå½“é‡åˆ°<=pivotçš„å€¼æ—¶ï¼Œåœä¸‹
1.  è‹¥æ­¤æ—¶å·¦å³æŒ‡é’ˆé‡åˆ æˆ–è€… å³æŒ‡é’ˆåœ¨å·¦æŒ‡é’ˆå‰é¢ï¼Œbreak
1.  äº¤æ¢å·¦å³æŒ‡é’ˆæŒ‡å‘çš„å€¼

```c++
class Solution {
public:
    int partition(vector<int>& nums, int left, int right) {  
        // è¦ç”Ÿæˆçš„éšæœºä¸‹æ ‡çš„èŒƒå›´åœ¨left~rightä¹‹é—´
        int randomIndex = left + rand() % (right - left + 1);
        //        rand() % (right - left + 1):ç”Ÿæˆ        0 ~        (right - left)çš„éšæœºæ•°
        // left + rand() % (right - left + 1):ç”Ÿæˆ left + 0 ~ left + (right - left)çš„éšæœºæ•°
        swap(nums[left], nums[randomIndex]);
        int pivot = nums[left]; 

        int le = left + 1; // le: less equals å°äºç­‰äº
        int ge = right; // ge: greater equals å¤§äºç­‰äº
        while (true) { // å†™æˆ while (le <= ge) ä¹Ÿå¯ä»¥
            while (le <= ge && nums[le] < pivot) le++;
            while (le <= ge && nums[ge] > pivot) ge--;
            // æ­¤æ—¶leå’Œgeåˆ†åˆ«æŒ‡å‘>=pivotå’Œ<=pivotçš„å€¼
            if (ge <= le) break;
            // æ²¡æœ‰è¿™å¥ifè¡Œä¸è¡Œå‘¢ï¼Ÿä¸è¡Œï¼å› ä¸ºè‹¥æ­¤æ—¶ geï¼ˆæŒ‡å‘<pivotçš„å€¼ï¼‰ < le ï¼ˆæŒ‡å‘>pivotçš„å€¼ï¼‰
            // ç»§ç»­å¾€ä¸‹èµ°swap, åˆ™ä¼šå˜æˆ geï¼ˆæŒ‡å‘>pivotçš„å€¼ï¼‰ < le ï¼ˆæŒ‡å‘<pivotçš„å€¼ï¼‰, æ˜¾ç„¶ä¸è¡Œ
            swap(nums[le++], nums[ge--]);
        }
        swap(nums[left], nums[ge]);
        return ge;
    }
    
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        int pivotIndex = partition(nums, left, right);
        quickSort(nums, left, pivotIndex - 1);
        quickSort(nums, pivotIndex + 1, right);
    }
    
    vector<int> sortArray(vector<int>& nums) {
        srand((unsigned)time(nullptr));//æ·»åŠ éšæœºæ•°ç§å­
        quickSort(nums, 0, nums.size() - 1);
        return nums;
    }
}; 
```

#### (4) ä¸‰è·¯å¿«æ’

**:small_red_triangle_down:  steps: ** `partition()` å°†åŒºé—´åˆ’åˆ†æˆ <pivotï¼Œ= pivot å’Œ >pivotçš„ä¸‰éƒ¨åˆ†ï¼ˆåˆ†åˆ«ç§°ç¬¬ä¸€ã€äºŒã€ä¸‰åŒºé—´ï¼‰

1.  éšæœºé€‰å–pivotï¼Œå¹¶æŠŠé€‰å–çš„å€¼ä¸nums[left]äº¤æ¢
2.  è®©æŒ‡é’ˆ i ä»left+1å¼€å§‹ï¼Œä»å·¦å¾€å³éå†ï¼Œå½“å·¦æŒ‡é’ˆé‡åˆ°
    - <pivotçš„å€¼æ—¶ï¼Œå°±å°†å…¶ä¸ç¬¬äºŒåŒºé—´çš„é¦–ä½å…ƒç´ äº¤æ¢ï¼Œç„¶åi++
    - =pivotçš„å€¼æ—¶ï¼Œç›´æ¥å°±i++
    - \>pivotçš„å€¼æ—¶ï¼Œå°±å°†å…¶ä¸ç¬¬ä¸‰åŒºé—´çš„é¦–ä½å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œç„¶åge--
3.  äº¤æ¢å·¦å³æŒ‡é’ˆæŒ‡å‘çš„å€¼

> `lt` ä¹Ÿå¯ä»¥è¡¨ç¤ºç¬¬ä¸€åŒºé—´æœ«ä½å…ƒç´ ï¼Œåªä¸è¿‡ä»£ç é€»è¾‘éœ€è¦ç¨å¾®å˜åŠ¨ä¸€ä¸‹ï¼Œå¯ä»¥å‚è€ƒ:fire:[75. é¢œè‰²åˆ†ç±»](https://leetcode.cn/problems/sort-colors/)çš„ä¸¤ç§ä¸‰è·¯å¿«æ’partitionå†™æ³•

```c++
class Solution {
public: 
    pair<int, int> partition(vector<int>& nums, int left, int right) {  
        // è¦ç”Ÿæˆçš„éšæœºä¸‹æ ‡çš„èŒƒå›´åœ¨left~rightä¹‹é—´
        int randomIndex = left + rand() % (right - left + 1);
        //        rand() % (right - left + 1):ç”Ÿæˆ        0 ~        (right - left)çš„éšæœºæ•°
        // left + rand() % (right - left + 1):ç”Ÿæˆ left + 0 ~ left + (right - left)çš„éšæœºæ•°
        swap(nums[left], nums[randomIndex]);
        int pivot = nums[left];

        int lt = left + 1; // lt: less than æŒ‡å‘ç¬¬ä¸€åŒºé—´æœ«ä½å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆä¹Ÿå³ç¬¬äºŒåŒºé—´çš„é¦–ä½å…ƒç´ æ‰€åœ¨ä½ç½®ï¼‰
        int gt = right; // ge: greater than æŒ‡å‘ç¬¬ä¸‰åŒºé—´é¦–ä½å…ƒç´ çš„å‰ä¸€ä¸ªä½ç½®
        // [left+1, lt)  < pivot
        //   [lt, i)    == pivot
        //   (gt, right] > pivot

        int i = left + 1;//ç”¨äºéå†
        while (i <= gt) { 
            // æŒ‡é’ˆ i ä»å·¦å¾€å³éå†ï¼Œå½“å·¦æŒ‡é’ˆé‡åˆ°
            // < pivotçš„å€¼æ—¶ï¼Œå°±å°†å…¶ä¸ç¬¬äºŒåŒºé—´çš„é¦–ä½å…ƒç´ äº¤æ¢ï¼Œç„¶ålt++, i++
            if (nums[i] < pivot) swap(nums[lt++], nums[i++]);
            // > pivotçš„å€¼æ—¶ï¼Œå°±å°†å…¶ä¸ç¬¬ä¸‰åŒºé—´çš„é¦–ä½å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œç„¶ågt--
            else if (nums[i] > pivot) swap(nums[i], nums[gt--]);
            // = pivotçš„å€¼æ—¶ï¼Œç›´æ¥å°±i++
            else i++;
        }
        swap(nums[left], nums[lt - 1]);
        // äº¤æ¢nums[left]å’Œç¬¬ä¸€åŒºé—´æœ«ä½å…ƒç´ , äº¤æ¢åç¬¬äºŒåŒºé—´å·¦è¾¹ç•Œå·¦ç§»äº†ä¸€ä½, ç¬¬ä¸€åŒºé—´å³è¾¹ç•Œå·¦ç§»äº†ä¸€ä½
        // ä¹Ÿå°±æ˜¯è¯´äº¤æ¢å lt-1 ä½ç½®çš„å€¼=pivot, ç¬¬ä¸€åŒºé—´æœ«ä½å…ƒç´ æ˜¯lt-2
        // ä¸€[left,lt-2] äºŒ[lt-1,gt] ä¸‰[gt+1,right]
        return make_pair(lt - 2, gt + 1); 
    }
    
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;

        // pair<int, int> p = partition(nums, left, right);
        // int lt = p.first;
        // int gt = p.second;
        // ä»¥ä¸Šä¸‰å¥å¯ä»¥å†™æˆä¸€å¥:
        auto [lt, gt] = partition(nums, left, right);
        // partition()åˆ’åˆ†åŒºé—´ä¸ºï¼Œä¹‹ååªéœ€å†é€’å½’å¤„ç†ç¬¬ä¸€å’Œç¬¬ä¸‰åŒºé—´ï¼Œè€Œä¸­é—´ç¬¬äºŒåŒºé—´çš„å…ƒç´ éƒ½å·²ç»è½åœ¨äº†å®ƒä»¬åº”è¯¥åœ¨çš„ä½ç½®
        quickSort(nums, left, lt); 
        quickSort(nums, gt, right);
    }
    
    vector<int> sortArray(vector<int>& nums) {
        srand((unsigned)time(nullptr));//æ·»åŠ éšæœºæ•°ç§å­
        quickSort(nums, 0, nums.size() - 1);
        return nums;
    }
}; 
```



### å½’å¹¶æ’åº

==çœ‹å¹•å¸ƒä¸Šå†™çš„==

### å †æ’åº

#### å †ï¼ˆçœ‹å¹•å¸ƒï¼‰

  å¤§æ ¹å †: æ ¹èŠ‚ç‚¹æ˜¯æœ€å¤§å…ƒç´ 

  å°æ ¹å †: æ ¹èŠ‚ç‚¹æ˜¯æœ€å°å…ƒç´ 

![image-20240219222600215](C:\Users\Oscar\AppData\Roaming\Typora\typora-user-images\image-20240219222600215.png)

å †æ˜¯ä»å †é¡¶pop, å› æ­¤å¦‚æœä¼˜å…ˆçº§é˜Ÿåˆ—ç”¨

- å¤§æ ¹å †ï¼Œé‚£ä¹ˆå½“å †æ¯pushä¸€ä¸ªå…ƒç´ å°±ä¼špopå †é¡¶æœ€å¤§å…ƒç´ ï¼Œå› æ­¤æœ€ç»ˆç•™ä¸‹çš„æ˜¯å‡åºæ’åºåå‰kä¸ªå…ƒç´ 
- å°æ ¹å †ï¼Œé‚£ä¹ˆå½“å †æ¯pushä¸€ä¸ªå…ƒç´ å°±ä¼špopå †é¡¶æœ€å°å…ƒç´ ï¼Œå› æ­¤æœ€ç»ˆç•™ä¸‹çš„æ˜¯é™åºæ’åºåå‰kä¸ªå…ƒç´ 

è€Œå †æ’åºä½¿ç”¨å¤§æ ¹å †ã€‚

æ‰€ä»¥ï¼Œ==topKé—®é¢˜è¦ç”¨å°æ ¹å †ã€‚==

ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šä¸Šæ»¤ã€ä¸‹æ»¤ã€‚

ä¸¤ç§å»ºå †æ³•ï¼š

- è‡ªé¡¶å‘ä¸‹ï¼ˆä¸Šæ»¤ï¼‰ï¼Œå †æ˜¯è‡ªé¡¶å‘ä¸‹**å»º**æˆçš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å¯¹äºæ¯ä¸ªå…ƒç´ çš„æ“ä½œåˆ†ä¸ºä¸¤æ­¥ï¼š
    1. å°†å…ƒç´ æ’åˆ°å †å°¾éƒ¨
    2. ç„¶åè®©å…¶å¾€ä¸Šèµ°è¿›è¡Œä¸Šæ»¤ã€‚

- è‡ªä¸‹è€Œä¸Šï¼ˆä¸‹æ»¤ï¼‰ï¼Œå †æ˜¯è‡ªä¸‹è€Œä¸Š**è°ƒæ•´**æˆçš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚
    1. å°†nä¸ªå…ƒç´ æ’åˆ°å †ä¸­ï¼Œ
    2. ä»å€’æ•°ç¬¬äºŒå±‚å¼€å§‹è°ƒæ•´å †ï¼Œæ€ä¹ˆè°ƒæ•´ï¼Ÿå¯¹è¯¥æ ‘çš„çˆ¶èŠ‚ç‚¹è¿›è¡Œä¸‹æ»¤æ“ä½œï¼Œå°†è¯¥æ ‘è°ƒæ•´ä¸ºå †ã€‚

#### ä¼˜å…ˆé˜Ÿåˆ—

ä¼˜å…ˆçº§é˜Ÿåˆ—å°±æ˜¯å®ç°äº†ã€ä»é˜Ÿå¤´å¼¹å‡ºå…ƒç´ ï¼Œä»é˜Ÿå°¾æ’å…¥å…ƒç´ ã€‘çš„å¯¹å¤–æ¥å£çš„å †ï¼Œå¯¹å¤–æ¥å£åŒé˜Ÿåˆ—ã€‚

æ—¶é—´å¤æ‚åº¦

- ä»å †é¡¶éƒ¨å¼¹å‡ºæ“ä½œï¼šO(logn)ã€‚å› ä¸ºå¼¹å‡ºå †é¡¶å…ƒç´ çš„åŒæ—¶è¦é‡æ–°è°ƒæ•´å †
    - è°ƒæ•´å †ï¼šå…ˆå°†æœ€åä¸€ä¸ªå…ƒç´ æ”¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œç„¶åä¸‹æ»¤
- ä»å †å°¾éƒ¨æ’å…¥æ“ä½œï¼šO(logn)ã€‚å› ä¸ºæ’å…¥åˆ°å°¾éƒ¨ä¹‹åï¼Œè¦è¿›è¡Œä¸Šæ»¤æ“ä½œã€‚

> æ¨¡æ¿å£°æ˜ï¼š`priority_queue<Type, Container, Functional>`
>
> - Typeè¦å­˜æ”¾çš„æ•°æ®ç±»å‹
> - Containerä¿å­˜æ•°æ®çš„å®¹å™¨ï¼Œé»˜è®¤æ˜¯vector<int>
> - Functionalå…ƒç´ æ¯”è¾ƒæ–¹å¼ï¼Œå½“æ•°æ®ç±»å‹æ˜¯**åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œé»˜è®¤æ˜¯å¤§é¡¶å †less<>**ï¼Œè‹¥ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶åˆ™éœ€è¦è‡ªå®šä¹‰æ¯”è¾ƒæ–¹å¼ã€‚
>
> > æ³¨æ„è¿™é‡Œçš„Functionalä¸èƒ½ç”¨lambadaï¼ï¼ï¼å› ä¸º`Lambda expressions are not allowed in unevaluated contexts (such as decltype) before C++20`ï¼Œä½†æ˜¯å¯ä»¥ç”¨ä»¿å‡½æ•°æˆ–è€…é‡è½½"<"è¿ç®—ç¬¦ï¼Œä»¿å‡½æ•°å¦‚ï¼š
> > ```cpp
> > class mycomparison {
> > public:
> >     bool operator()(const pair<int, int>& a, const pair<int, int>& b) {
> >         return a.second > b.second; //å°æ ¹å †
> >     }
> > };
> > ```

#### å †æ’åº

==çœ‹å¹•å¸ƒä¸Šå†™çš„==

- å‡åºï¼šä¸€èˆ¬å»ºå¤§é¡¶å †
- é™åºï¼šä¸€èˆ¬å»ºå°é¡¶å †

## ç›¸å…³æ¦‚å¿µ

å†…éƒ¨æ’åºï¼šæ’åºæœŸé—´å…ƒç´ å…¨å­˜åœ¨å†…å­˜ä¸­çš„æ’åºï¼›

å¤–éƒ¨æ’åºï¼šæ’åºæœŸé—´å…ƒç´ æ— æ³•å…¨å­˜åœ¨å†…å­˜ä¸­ï¼Œå¿…é¡»åœ¨æ’åºè¿‡ç¨‹ä¸­æ ¹æ®è¦æ±‚ä¸æ–­åœ°è¿›è¡Œå†…å¤–å­˜ä¹‹é—´ç§»åŠ¨åœ°æ’åºï¼›ï¼ˆåªæœ‰å¤šè·¯å½’å¹¶æ’åºæ˜¯ï¼‰

ç¨³å®šæ€§ï¼šæ’åºåï¼Œå€¼ç›¸åŒçš„å…ƒç´ ä¿æŒåŸæ¥é¡ºåºä¸­çš„ç›¸å¯¹ä½ç½®ä¸å˜.

## ä»¥å‰æ•°æ®ç»“æ„è¯¾å†™çš„ä»£ç 

### ç›´æ¥æ’å…¥æ’åº

```C
//åŸºç¡€ç®—æ³•
void insertSort(RecType R[],int n)
{   int i,j,RecType tmp;
    for(i=1;i<n;i++)    //i=1æ˜¯å› ä¸ºåˆå§‹æ—¶æœ‰åºåŒºå·²ç»æœ‰R[0]å…ƒç´ äº†ï¼Œæ’å…¥æ˜¯ä»R[1]å¼€å§‹
    {   tmp=R[i];
        j=i-1;
        while(j>=0&&tmp.key<R[j].key)    //æ‰¾R[i]çš„æ’å…¥ä½ç½®
        {   R[j+1]=R[j];    //å°†å…³é”®å­—å¤§äºR[i].keyçš„è®°å½•åç§»
            j--;
        }
        R[j+1]=tmp;     //åœ¨j+1å¤„æ’å…¥R[i]
    }
}
//æ”¹è¿›ç®—æ³•â€”â€”â€”â€”å¢åŠ å“¨å…µ(R[0]å……å½“å“¨å…µ)
void insertSort(SqList &L,int n)
{   int i,j;
    for(i=2;i<=n;i++)   //i=2æ˜¯å› ä¸º0å·ä½ç½®æ˜¯ç›‘è§†å“¨ï¼Œ1å·å…ˆæ’å…¥å…ƒç´ ï¼Œä»2å·å…ƒç´ æ’å…¥æ—¶å¼€å§‹æ¯”è¾ƒ
    {   if(L[i-1].key>L[i].key) //è‹¥å‰ä¸€ä½ç½®æ¯”åä¸€ä½ç½®å°åˆ™ä¸ç”¨ç§»åŠ¨ï¼Œåä¹‹è¦ç§»åŠ¨
        {   L[0]=L[i];     //å¤åˆ¶ä¸ºå“¨å…µ
            for(j=i-1;L[0].key<L[j].key;j--) L[j+1]=L[j];   //è®°å½•åç§»
            L[j+1]=L[0];    //æ’å…¥åˆ°æ­£ç¡®ä½ç½®
        }
}
```

### æŠ˜åŠæ’å…¥æ’åº

```C
void BinInsertSort(RecType R[],int n)
{   int i,j,low,high,mid;
    RecType tmp;
    for(i=1;i<=n;i++)
    {   if(R[i].key<R[i-1].key)     //è‹¥æ— åºåŒºç¬¬ä¸€ä¸ªå…ƒç´ >æœ‰åºåŒºæœ€åä¸€ä¸ªå…ƒç´ 
        {   tmp=R[i];
            low=0;high=i-1;     //lowå’Œhighåˆ†åˆ«åœ¨æœ‰åºåŒºçš„ç¬¬ä¸€ä¸ªä½ç½®å’Œæœ€åä¸€ä¸ªä½ç½®
            while(low<=high)    //åœ¨R[low..high]ä¸­æŸ¥æ‰¾æ’å…¥ä½ç½®
            {   mid=(low+high)/2;
                if(tmp.key<R[mid].key) high=mid-1;  //åœ¨å·¦åŒºé—´æŸ¥æ‰¾
                else low=mid+1;     //åœ¨å³åŒºé—´æŸ¥æ‰¾
            }
            //å¾ªç¯ç»“æŸï¼Œhigh+1ä¸ºæ’å…¥ä½ç½®ï¼Œæ¥ä¸‹æ¥è¯¥ç§»åŠ¨å…ƒç´ +æ’å…¥äº†
            for(j=i-1;j>=high+1;j--) R[j+1]=R[j];   //å…ƒç´ ä¸€ä¸ªä¸ªåç§»
            R[high+1]=tmp;  //æ’å…¥
        }
    }
}
```

### å¸Œå°”æ’åº

```C
void ShellSort(RecType R[],int n)
{   int i,j,d;
    RecType tmp;
    d=n/2;  //å¢é‡ç½®åˆå€¼ï¼ˆæ¯”å¦‚è‹¥è¡¨é•¿ä¸º10ï¼Œåˆ™åˆå§‹å¢é‡ä¸º5ï¼‰
    while(d>0)
    {   for(i=d;i<n;i++)    //å¯¹æ‰€æœ‰ç»„é‡‡ç”¨ç›´æ¥æ’å…¥æ’åº
        {   tmp=R[i];
            j=i-d;
            while(j>=0&&tmp.key<R[j].key)
            {   R[j+d]=R[j];
                j=j-d;
            }
            R[j+d]=tmp;
        }
        d=d/2;  //å‡å°å¢é‡
    }
}
//d=5
//i=5,tmp=R[5],j=0,å› ä¸ºR[5]<R[0],R[5]=R[0],j=0- R[j+5]=R[5]


```

### å†’æ³¡æ’åº

```C
//åŸºç¡€ç®—æ³•
void BubbleSort(RecType R[],int n)
{   int i,j;
    for(i=0;i<n-1;i++)  //æ¯æ¬¡é€‰å‡ºæœ€å°çš„æµ®åˆ°æœ€å‰é¢ï¼Œæ€»å…±éœ€è¦n-1è¶Ÿ
    {   for(j=n-1;j>i;j--)      //æ¯ä¸€è¶Ÿæ¯”è¾ƒn-1-(i+1)=n-iæ¬¡
            if(R[j].key<R[j-1].key) swap(R[j],R[j-1]);
    }
}
//æ”¹è¿›ç®—æ³•
/* æœ‰äº›æƒ…å†µä¸‹ï¼Œåœ¨ç¬¬iè¶Ÿ(i<n-1)æ—¶å·²æ’å¥½åºäº†ï¼Œå°±ä¸éœ€è¦å†æ‰§è¡Œåé¢å‡ è¶Ÿçš„æ¯”è¾ƒã€‚
   å½“æŸä¸€è¶Ÿæ¯”è¾ƒæ—¶ä¸å‡ºç°ä»»ä½•å…ƒç´ äº¤æ¢ï¼Œè¯´æ˜å‰©ä¸‹çš„å…ƒç´ éƒ½å·²ç»æ˜¯æœ‰åºäº†çš„*/
void BubbleSort(RecType R[],int n)
{   int i,j,flag;       //é€šè¿‡flagçš„å€¼åˆ¤æ–­æ˜¯å¦å‡ºç°å…ƒç´ äº¤æ¢
    for(i=0;i<n-1;i++)  //æ¯æ¬¡é€‰å‡ºæœ€å°çš„æµ®åˆ°æœ€å‰é¢ï¼Œæ€»å…±éœ€è¦n-1è¶Ÿ
    {   flag=0;     //ä¸€è¶Ÿå‰è¿˜æ²¡å¼€å§‹äº¤æ¢flag=0
        for(j=n-1;j>i;j--)      //æ¯ä¸€è¶Ÿæ¯”è¾ƒn-1-(i+1)=n-iæ¬¡
            if(R[j].key<R[j-1].key)
            {   swap(R[j],R[j-1]);
                flag=1;     //è‹¥å‡ºç°äº¤æ¢åˆ™flag=1
            }
        if(flag==0) return;     //flag=0è¯´æ˜æ²¡æœ‰äº¤æ¢è¿‡ï¼Œåˆ™æ’åºå·²å®Œæˆ
    }
}
```

### é€‰æ‹©æ’åº

```C
void QuickSort(RecType R[],int s,int t)     //å¯¹R[s..t]çš„å…ƒç´ è¿›è¡Œå¿«é€Ÿæ’åº
{   int i;
    if(s<t)     //é‡å¤ç›´è‡³æ¯éƒ¨åˆ†åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæ­¢
    {   i=partition(R,s,t);
        QuickSort(R,s,i-1);     //å¯¹å·¦åŒºé—´é€’å½’
        QuickSort(R,i+1,t);     //å¯¹å³åŒºé—´é€’å½’
    }
}
int partition(RecType R[],int s,int n)  //ä¸€è¶Ÿåˆ’åˆ†
{   int i=s,j=t;    //iå’Œjçš„åˆå€¼åˆ†åˆ«åœ¨è¡¨çš„å¤´å’Œå°¾
    RecType tmp=R[i];   //ä»¥R[i]ä¸ºåŸºå‡†
    while(i<j)      //ä»ä¸¤ç«¯æ‰«æ
    {   while(j>i&&R[j].key>=tmp.key) j--;  //ä»å³å‘å·¦æ‰«æï¼Œæ‰¾ä¸€ä¸ªå°äºtmp.keyçš„R[j]
        R[i]=R[j];  //æ‰¾åˆ°è¿™æ ·çš„R[j]å°±æ”¾å…¥R[i]ä¸­
        while(i<j&&R[i].key<=tmp.key) i++;  //ä»å·¦å‘å³æ‰«æï¼Œæ‰¾ä¸€ä¸ªå¤§äºtmp.keyçš„R[i]
        R[j]=R[i];  //æ‰¾åˆ°è¿™æ ·çš„R[i]å°±æ”¾å…¥R[j]ä¸­
    }
    R[i]=tmp;
    return i;
}
```

### ç®€å•é€‰æ‹©æ’åº

```C
void SelectSort(RecType R[],int n)
{   int i,j,k;
    for(i=0;i<n-1;i++)  //æ’åºå…±æœ‰n-1è¶Ÿ
    {   k=i;
        for(j=i+1;j<n;j++)      //åœ¨å½“å‰æ— åºåŒºR[i..n-1]ä¸­é€‰keyæœ€å°çš„R[k]ï¼Œæ¯ä¸€è¶Ÿæ¯”è¾ƒéœ€è¿›è¡Œn-i+-1æ¬¡
            if(R[j].key<R[k].key) k=j;  //kè®°ä¸‹å½“å‰æ‰¾åˆ°çš„æœ€å°å…³é”®å­—æ‰€åœ¨çš„ä½ç½®
        if(k!=i) swap(R[i],R[k]);   //å¦‚æœkæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™è¯´æ˜ç¬¬iä¸ªä½ç½®ä¸Šçš„å€¼å°±æ˜¯æœ€å°å€¼ï¼Œåé¢æ²¡æœ‰æ¯”å®ƒè¿˜å°çš„äº†
    }
}
```

### å †æ’åº

----

çœ‹ä¸‹é¢çš„é¢˜

## ç»ƒæ‰‹é¢˜

### [:fire: 215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)

#### **é¢˜æ„**

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [3,2,1,5,6,4], k = 2
è¾“å‡º: 5
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: [3,2,3,1,2,4,5,5,6], k = 4
è¾“å‡º: 4
```

**æç¤ºï¼š**

- `1 <= k <= nums.length <= 105`
- `-104 <= nums[i] <= 104`

#### å‚è€ƒ

1. [ã€Šç®—æ³•ä¸å¥½ç©ã€‹ä¸“é¢˜å…­ï¼šå¿«é€Ÿæ’åº ](https://space.bilibili.com/236935093/channel/collectiondetail?sid=378477)
2. [weiç¥](https://leetcode.cn/problems/kth-largest-element-in-an-array/solutions/19607/partitionfen-er-zhi-zhi-you-xian-dui-lie-java-dai-)
3. [é¢è¯•å®˜æœ€å–œçˆ±çš„TopKé—®é¢˜ç®—æ³•è¯¦è§£](https://zhuanlan.zhihu.com/p/76734219)
4. [è½è½è½æ´›å…‹](https://leetcode.cn/problems/kth-largest-element-in-an-array/solutions/836425/xie-gei-qian-duan-tong-xue-de-ti-jie-yi-kt5p2) å †æ’åº

#### topKé—®é¢˜ä¼˜åŒ–è¿‡ç¨‹

- å…¨å±€æ’åºï¼šå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’åºå¾—åˆ°ç¬¬Kå¤§çš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯sort()çš„æ—¶é—´å¤æ‚åº¦O(nlogn)

- å±€éƒ¨æ’åºï¼šåªè¦èƒ½æ’åºå‰Kä¸ªå°±è¡Œï¼Œç”¨æ’å…¥æ’åºæˆ–é€‰æ‹©æ’åºï¼Œæ—¶é—´å¤æ‚åº¦O(n*k)

- å †æ’åºï¼šæ„å»ºä¸€ä¸ªå¤§å°ä¸ºnçš„å¤§æ ¹å †ï¼Œå¾ªç¯kæ¬¡ï¼Œæ¯æ¬¡å°†å †é¡¶æœ€å¤§å…ƒç´ ä¸‹æ²‰ç„¶åé‡æ–°è°ƒæ•´å †ã€‚æ—¶é—´å¤æ‚åº¦O(n+klogn) -->æ¸è¿›=O(nlogn)ï¼Œä¼šæ›´æ”¹åŸæ•°ç»„ã€‚

- ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šåªéœ€ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º k çš„å°æ ¹å †ï¼Œæ¯æ¬¡å°†å †é¡¶æœ€å°å…ƒç´ popå‡ºå»ï¼Œæœ€åå †ä¸­å°±æ˜¯å‡ºç°é¢‘æ¬¡å‰ké«˜çš„å…ƒç´ ï¼Œå †é¡¶å°±æ˜¯å‡ºç°é¢‘æ¬¡ç¬¬ké«˜çš„å…ƒç´ ã€‚æ—¶é—´å¤æ‚åº¦O(nlogk)ï¼Œkå¾ˆå°çš„æ—¶å€™å°±ç›¸å½“äºO(n)ï¼Œå¦å¤–æœ‰ä¸ªä¼˜ç‚¹æ˜¯ä¸ä¼šæ›´æ”¹åŸæ•°ç»„

- äºŒè·¯å¿«æ’æˆ–ä¸‰è·¯å¿«æ’ï¼š

    - æœ€å¥½æƒ…å†µä¸‹ä¸ºO(N)ï¼šå°½ç®¡ä¸€æ¬¡partiton()çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ï¼Œä½†æ¯è½®èŒƒå›´ç åŠï¼Œæ‰€ä»¥æ€»æ—¶é—´æ˜¯ä¸ªç­‰æ¯”æ•°åˆ—ï¼šn + n/2 + n/4 +... æ ¹æ®ç­‰æ¯”æ•°åˆ—æ±‚å’Œå…¬å¼ï¼Œä¸º 2nã€‚
    - æœ€åæƒ…å†µä¸‹ï¼Œæ¯æ¬¡å–çš„pivotéƒ½ä½äºæ•°ç»„çš„ä¸¤ç«¯ï¼Œæ—¶é—´å¤æ‚åº¦é€€åŒ–ä¸º O(n^2^ )ã€‚ä½†ç”±äºæˆ‘ä»¬åœ¨æ¯æ¬¡é€’å½’éƒ½ä¼šéšæœºé€‰å–pivotï¼Œæ•…å‡ºç°æœ€åæƒ…å†µçš„æ¦‚ç‡å¾ˆä½ã€‚
    - å¹³å‡æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚


#### æ³•ä¸€

==:star: **æ ¸å¿ƒæ€è·¯ï¼š äºŒè·¯å¿«æ’  **:star:==

![image-20240218132259321](https://cdn.jsdelivr.net/gh/808bass666/picBed@main/202402181322391.png)

```c++
class Solution {
public:
    int partition(vector<int>& nums, int left, int right) {
        // è¿”å› åŸºå‡†å…ƒç´ æ‰€åœ¨ä¸‹æ ‡ 

        // å°†åŒºé—´åˆ’åˆ†ä¸º<=pivotå’Œ>=pivotçš„ä¸¤éƒ¨åˆ†
        // è¦ç”Ÿæˆçš„éšæœºä¸‹æ ‡çš„èŒƒå›´åœ¨left~rightä¹‹é—´.  rand() % n: ç”Ÿæˆ0~n-1èŒƒå›´å†…çš„éšæœºæ•°
        int randomIndex = left + rand() % (right - left + 1);
        //        rand() % (right - left + 1):ç”Ÿæˆ        0 ~        (right - left)çš„éšæœºæ•°
        // left + rand() % (right - left + 1):ç”Ÿæˆ left + 0 ~ left + (right - left)çš„éšæœºæ•°
        swap(nums[left], nums[randomIndex]);
        int pivot = nums[left];

        int le = left + 1; // le: å°äºç­‰äº
        int ge = right;    // ge: å¤§äºç­‰äº

        while (true) {
            // å› ä¸ºå¾ªç¯é‡Œé¢æœ‰breakæ¡ä»¶, å› æ­¤å¯ä»¥ç›´æ¥ç”¨while (true)
            while (le <= ge && nums[le] < pivot) {
                le++;
            } 
            while (le <= ge && nums[ge] > pivot) {
                ge--;
            } 
            // æ­¤æ—¶leå’Œgeåˆ†åˆ«æŒ‡å‘>=pivotå’Œ<=pivotçš„å€¼
            if (ge <= le) break;
            // æ²¡æœ‰è¿™å¥ifè¡Œä¸è¡Œå‘¢ï¼Ÿä¸è¡Œï¼å› ä¸ºè‹¥æ­¤æ—¶ geï¼ˆæŒ‡å‘<pivotçš„å€¼ï¼‰ < le ï¼ˆæŒ‡å‘>pivotçš„å€¼ï¼‰
            // ç»§ç»­å¾€ä¸‹èµ°swap, åˆ™ä¼šå˜æˆ geï¼ˆæŒ‡å‘>pivotçš„å€¼ï¼‰ < le ï¼ˆæŒ‡å‘<pivotçš„å€¼ï¼‰, æ˜¾ç„¶ä¸è¡Œ
            swap(nums[le++], nums[ge--]);
        }
        // äº¤æ¢, è®©åŸºå‡†å…ƒç´ ä½äºä¸¤åŒºé—´çš„åˆ†å‰²ä½ç½®
        swap(nums[left], nums[ge]);
        return ge;
    }
    int findKthLargest(vector<int>& nums, int k) {
        srand((unsigned)time(nullptr));
        int targetIndex = nums.size() - k;
        // ç¬¬1å¤§åœ¨n-1, ç¬¬kå¤§å°±åœ¨n-k
        int left = 0;
        int right = nums.size() - 1;
        while (true) { //å› ä¸ºä¸€å®šèƒ½æ‰¾åˆ°ç¬¬kå¤§çš„å…ƒç´ 
            int pivotIndex = partition(nums, left, right);
            // é€æ­¥ç¼©å°æœç´¢åŒºé—´ç»§ç»­åˆ’åˆ†(ç±»äºŒåˆ†)
            if (pivotIndex < targetIndex) {
                left = pivotIndex + 1;
            } else if (pivotIndex > targetIndex) {
                right = pivotIndex - 1;
            } else {
                return nums[pivotIndex];
            }
        }
        return 0;
    }
};
```

###### **å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡æƒ…å†µä¸‹ä¸ºO(N)ã€‚ 

- ç©ºé—´å¤æ‚åº¦ï¼šO(1) 

#### æ³•äºŒ

==:star: **æ ¸å¿ƒæ€è·¯ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰   **:star:==  ä½†æ˜¯ä¸€èˆ¬é¢è¯•çš„æ—¶å€™ä¼šè¦æ±‚æ‰‹å†™å †æ’åºè€Œä¸èƒ½ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—

```c++
int findKthLargest(vector<int>& nums, int k) {
    priority_queue<int, vector<int>, greater<int>> pri_que;//å°æ ¹å †
    //ç”¨å †æ‰«ææ•°ç»„ï¼Œæ‰«æå®Œä¹‹åå †é¡¶å…ƒç´ å°±æ˜¯ç¬¬kå¤§çš„å…ƒç´ 
    for (auto& val : nums) {
        pri_que.push(val);
        if (pri_que.size() > k) pri_que.pop();
    }
    return pri_que.top();
}
```

##### **å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ¡k)ï¼Œè¾¹æ‰«æO(n)è¾¹å»ºå †å’Œåˆ é™¤O(logk)ï¼Œæ€»çš„å°±æ˜¯O(nlogk)
- ç©ºé—´å¤æ‚åº¦ï¼šO(k)

#### æ³•ä¸‰

==:star: **æ ¸å¿ƒæ€è·¯ï¼šå †æ’åºï¼ˆæ‰‹å†™å¤§æ ¹å †ï¼‰   **:star:==    [åŠ¨å›¾æ¼”ç¤º](https://vdn6.vzuu.com/SD/3bb38dfe-236a-11eb-8039-a6caf32b14c9.mp4?pkey=AAUbsQMVw-VtgAYGH8WImV7ftlackJRoxU6nRszJLIIDzuUtOIUtK1EijGgLlrjmGk69Mnq9VbhUguUzJi-nMtD3&c=avc.0.0&f=mp4&pu=078babd7&bu=078babd7&expiration=1711339727&v=ks6)

**:small_red_triangle_down:  steps: **

1.  ã€å»ºå †ã€‘ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆi = heapSize / 2 - 1ï¼‰å¼€å§‹ï¼Œè‡ªåº•å‘ä¸Š é€šè¿‡ä¸‹æ»¤æ“ä½œ å°†ç»™å®šæ— åºåºåˆ—æ„é€ æˆå¤§æ ¹å †ï¼ˆè‡ªåº•å‘ä¸Šæ„å»ºåªéœ€O(n)ï¼‰
2.  ã€å †æ’åºã€‘å¾ªç¯ï¼Œæ¯å¾ªç¯ä¸€æ¬¡å°±å°†ç¬¬ i å¤§çš„å…ƒç´ æ²‰åˆ°æ•°ç»„å°¾éƒ¨ï¼ˆå †å°¾éƒ¨ï¼‰
    1.  swap(å †é¡¶å…ƒç´ , å †å°¾å…ƒç´ )
    2.  å †å¤§å°-1ï¼Œé‡æ–°è°ƒæ•´å †ä¸ºå¤§æ ¹å †(ä¸‹æ»¤, çˆ¶èŠ‚ç‚¹ä¸‹æ²‰)

##### ä»£ç 

###### æœ‰æ³¨é‡Šç‰ˆ


```c++
class Solution {
public:
    // å»ºå¤§æ ¹å †
    void buildMaxHeap(vector<int>& nums, int heapSize) {
        // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹(ç´¢å¼•ä¸ºheapSize / 2 - 1)å¼€å§‹è°ƒæ•´
        for (int i = heapSize / 2 - 1; i >= 0; --i) {
            // è°ƒæ•´æ— åºåºåˆ—ä¸­[i, heapSize)è¡¨ç¤ºçš„å †ä¸ºå¤§æ ¹å †
            adjustMaxHeap(nums, i, heapSize);
        }
    }
    // é€šè¿‡ä¸‹æ»¤æ“ä½œè°ƒæ•´[start, end)ä¸ºå¤§æ ¹å †
    void adjustMaxHeap(vector<int>& nums, int start, int end) {
        // startå§‹ç»ˆè¡¨ç¤ºæ ¹çš„ä¸‹æ ‡ï¼Œparentè¡¨ç¤ºä¸‰è€…ä¸­æœ€å¤§çš„ç»“ç‚¹çš„ä½ç½®
        // è°ƒæ•´å‰æ ¹çš„å€¼æ˜¯nums[start]ï¼Œ
        int parent = start;
        int Lnode = 2 * start + 1;
        int Rnode = 2 * start + 2;
        // å°†parentèµ‹å€¼ä¸ºstartã€Lnodeã€Rnodeä¸‰è€…ä¸­ç»“ç‚¹å€¼æœ€å¤§çš„é‚£ä¸ª
        // ä¸ºä»€ä¹ˆéœ€è¦L/Rnode < endæ‰å¯ä»¥ï¼Ÿï¼Ÿï¼Ÿè¦é˜²æ­¢è¶Šç•Œï¼Œæœ‰å¯èƒ½startä¸å­˜åœ¨å·¦å³å­
        if (Lnode < end && nums[parent] < nums[Lnode]) {
            parent = Lnode;
        }
        if (Rnode < end && nums[parent] < nums[Rnode]) { 
            parent = Rnode;
        }
        // æ‰¾åˆ°ä¹‹å‰çš„æ ¹çš„å€¼ï¼ˆnums[start]ï¼‰è¢«æ¢åˆ°å·¦å­è¿˜æ˜¯å³å­
        // å®ƒè¢«æ¢åˆ°å“ªï¼Œå“ªæ£µå­æ ‘å°±éœ€è¦é‡æ–°è°ƒæ•´
        // parentæ›´æ–°äº†, è¯´æ˜ä¸‰è€…ä¸­æœ€å¤§çš„ç»“ç‚¹åœ¨å·¦å³å­ï¼Œè¦é‡æ–°è°ƒæ•´å †
        if (parent != start) {
            // ç”¨parentä½ç½®çš„å€¼ä»£æ›¿åŸæ¥çš„æ ¹startçš„å€¼, ç„¶åè°ƒæ•´startæ‰€åœ¨çš„å­æ ‘
            swap(nums[start], nums[parent]);
            // å€¼äº¤æ¢åstartä»è¡¨ç¤ºæ ¹çš„ä½ç½®ï¼Œ
            // parentåˆ™è¡¨ç¤ºä¸‰è€…ä¸­æœ€å¤§çš„é‚£ä¸ªå·¦/å³å­çš„ä½ç½®ï¼Œä¹Ÿè¡¨ç¤ºåŸæ¥æ ¹çš„å€¼ç°åœ¨æ‰€å¤„çš„ä½ç½®
            adjustMaxHeap(nums, parent, end);
        }
    }
    // å †æ’åº
    int findKthLargest(vector<int>& nums, int k) {
        // 1. å»ºå¤§æ ¹å †, ã€æ—¶é—´å¤æ‚åº¦: è‡ªåº•å‘ä¸Š ä¸‹æ»¤ å»ºå †, O(n)ã€‘
        buildMaxHeap(nums, nums.size());
        int heapSize = nums.size();
        // 2. å †æ’åº, ã€æ—¶é—´å¤æ‚åº¦: å¾ªç¯kæ¬¡, è°ƒæ•´å †çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logn), æ€»å…±æ˜¯O(klogn)ã€‘
        // æ¯æ¬¡å°†å †é¡¶æœ€å¤§å…ƒç´ ä¸‹æ²‰, ç„¶åé‡æ–°è°ƒæ•´å †, ä¸‹æ²‰kæ¬¡ä¹‹å        
        // ç¬¬1æ¬¡å¾ªç¯, i = nums.size() - 1, ç¬¬1å¤§çš„å…ƒç´ nums[0]ä¸‹æ²‰åˆ°nums.size() - 1
        // ç¬¬kæ¬¡å¾ªç¯, i = nums.size() - k, ç¬¬kå¤§çš„å…ƒç´ nums[0]ä¸‹æ²‰åˆ°nums.size() - k
        for (int i = nums.size() - 1; i >= nums.size() - k; --i) {  
            // å †ä¸­åªå‰©ä¸€ä¸ªå…ƒç´ æ—¶å°±ä¸éœ€è¦å†ä¸‹æ²‰äº†, --heapSizeåå †ä¸­ä¸å‰©å…ƒç´ äº†ä¹Ÿå°±ä¸éœ€è¦ç»§ç»­è°ƒæ•´å †äº†
            if (heapSize - 1 <= 0) break;
            // ä¸åŠ ifå°±ä¼šæŠ¥é”™ 
            swap(nums[i], nums[0]);  
            // --heapSizeå› ä¸ºä¸‹æ²‰åçš„å…ƒç´ ä¸å‚ä¸åˆ°å¤§é¡¶å †çš„è°ƒæ•´
            adjustMaxHeap(nums, 0, --heapSize);
        }
        return nums[nums.size() - k]; 

        // // ä¹Ÿå¯ä»¥ä¸ç”¨èµ°æœ€åä¸€æ¬¡å¾ªç¯ï¼Œé‚£ä¹ˆå¾ªç¯ç»“æŸæ—¶ï¼Œç¬¬kå¤§çš„å…ƒç´ nums[0]è¿˜æ²¡æœ‰ä¸‹æ²‰ï¼Œç›´æ¥è¿”å›
        // for (int i = nums.size() - 1; i > nums.size() - k; --i) {
        //     swap(nums[i], nums[0]);  
        //     adjustMaxHeap(nums, 0, --heapSize);
        // }
        // return nums[0];
    }
};
```

###### ç²¾ç®€æ³¨é‡Šç‰ˆ

```c++
class Solution {
public:
    // å»ºå¤§æ ¹å †
    void buildMaxHeap(vector<int>& nums, int heapSize) {
        for (int i = heapSize / 2 - 1; i >= 0; --i) {
            adjustMaxHeap(nums, i, heapSize);
        }
    }
    // é€šè¿‡ä¸‹æ»¤æ“ä½œè°ƒæ•´[start, end)ä¸ºå¤§æ ¹å †
    void adjustMaxHeap(vector<int>& nums, int start, int end) {
        int parent = start;
        int Lnode = 2 * start + 1;
        int Rnode = 2 * start + 2;
        if (Lnode < end && nums[parent] < nums[Lnode]) {
            parent = Lnode;
        }
        if (Rnode < end && nums[parent] < nums[Rnode]) { 
            parent = Rnode;
        }
        if (parent != start) {
            swap(nums[start], nums[parent]);
            adjustMaxHeap(nums, parent, end);
        }
    }
    // å †æ’åº
    int findKthLargest(vector<int>& nums, int k) {
        // 1. å»ºå¤§æ ¹å †
        buildMaxHeap(nums, nums.size());
        int heapSize = nums.size();
        // 2. å †æ’åº
        for (int i = nums.size() - 1; i >= nums.size() - k; --i) {
            if (heapSize - 1 <= 0) break;
            swap(nums[i], nums[0]);  
            adjustMaxHeap(nums, 0, --heapSize);
        }
        return nums[nums.size() - k];
        // æˆ–è€…å†™æˆä¸‹é¢çš„æ›´å¥½ï¼Œæ— éœ€æ¡ä»¶åˆ¤æ–­
        // for (int i = nums.size() - 1; i > nums.size() - k; --i) {
        //     swap(nums[i], nums[0]);  
        //     adjustMaxHeap(nums, 0, --heapSize);
        // }
        // return nums[0];
    }
}
```

##### **å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼šO(nlogâ¡n)ï¼Œå»ºå †çš„æ—¶é—´ä»£ä»·æ˜¯ O(n)ï¼Œkæ¬¡è°ƒæ•´å †çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(klogn)ï¼Œå› ä¸º k<nï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚ä¸º O(n+klogâ¡n)=O(nlogâ¡n)ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(n)

### :fire:[75. é¢œè‰²åˆ†ç±»](https://leetcode.cn/problems/sort-colors/)

#### é¢˜æ„

ç»™å®šä¸€ä¸ªåŒ…å«çº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€å…± `n` ä¸ªå…ƒç´ çš„æ•°ç»„ `nums` ï¼Œ**[åŸåœ°](https://baike.baidu.com/item/åŸåœ°ç®—æ³•)**å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œä½¿å¾—ç›¸åŒé¢œè‰²çš„å…ƒç´ ç›¸é‚»ï¼Œå¹¶æŒ‰ç…§çº¢è‰²ã€ç™½è‰²ã€è“è‰²é¡ºåºæ’åˆ—ã€‚

æˆ‘ä»¬ä½¿ç”¨æ•´æ•° `0`ã€ `1` å’Œ `2` åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç™½è‰²å’Œè“è‰²ã€‚

å¿…é¡»åœ¨ä¸ä½¿ç”¨åº“å†…ç½®çš„ sort å‡½æ•°çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,2,1,1,0]
è¾“å‡ºï¼š[0,0,1,1,2,2]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [2,0,1]
è¾“å‡ºï¼š[0,1,2]
```

**æç¤ºï¼š**

- `n == nums.length`
- `1 <= n <= 300`
- `nums[i]` ä¸º `0`ã€`1` æˆ– `2`

**è¿›é˜¶ï¼š**

- ä½ èƒ½æƒ³å‡ºä¸€ä¸ªä»…ä½¿ç”¨å¸¸æ•°ç©ºé—´çš„ä¸€è¶Ÿæ‰«æç®—æ³•å—ï¼Ÿ

#### æ€è·¯

==:star: **æ ¸å¿ƒæ€è·¯ï¼š ä¸‰è·¯å¿«æ’ partition  **:star:==

**:key:  key**

- å’Œå‰é¢çš„ä¸‰è·¯å¿«æ’ partitionä¸åŒçš„æ˜¯ï¼Œæœ¬é¢˜ä¸­æ•°ç»„åªæœ‰ä¸‰ç§å…ƒç´ ï¼Œä»¥1ä¸ºpivotçš„è¯ï¼Œ0å°±<pivotï¼Œ2>pivotã€‚å› æ­¤åªéœ€ä¸€è¶Ÿä¸‰è·¯å¿«æ’ partitionå°±èƒ½æ’å¥½åºã€‚

#### ä»£ç 

##### ç¬¬ä¸€ç§å†™æ³•

```c++
void sortColors(vector<int>& nums) {
    // å·¦,ä¸­,å³åŒºé—´åˆ†åˆ«ç”¨: [0,left], (left, i), (right,n-1]è¡¨ç¤º
    int left = -1; 				 // æŒ‡å‘å·¦åŒºé—´æœ«ä½
    int right = nums.size() - 1; // æŒ‡å‘å³åŒºé—´é¦–ä½å…ƒç´ çš„å‰ä¸€ä¸ªä½ç½®
    int i = 0;					 // æŒ‡å‘ä¸­é—´åŒºé—´æœ«ä½çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå½“å‰éå†ä½ç½®ï¼‰
    while (i <= right) {
        // i==rightæ—¶ï¼Œç”±äºrightä¸å±äºå³åŒºé—´ï¼Œå› æ­¤ä¸çŸ¥é“rightæ˜¯å¤šå°‘ï¼Œè¿˜éœ€è¦ä¸€æ¬¡å¾ªç¯
        if (nums[i] == 0) {
            swap(nums[i++], nums[++left]);
        } else if (nums[i] == 1) {
            i++;
        } else {
            swap(nums[i], nums[right--]);
        }
    }
}
```

##### ç¬¬äºŒç§å†™æ³•

```c++
void sortColors(vector<int>& nums) {
    // å·¦,ä¸­,å³åŒºé—´åˆ†åˆ«ç”¨: [0,left], (left, i), [right,n-1]è¡¨ç¤º
    int left = -1; 			 // æŒ‡å‘å·¦åŒºé—´æœ«ä½
    int right = nums.size(); // æŒ‡å‘å³åŒºé—´é¦–ä½å…ƒç´ 
    int i = 0;		    	 // æŒ‡å‘ä¸­é—´åŒºé—´æœ«ä½çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå½“å‰éå†ä½ç½®ï¼‰
    while (i < right) {
        // i==rightæ—¶ï¼Œç”±äºrightå±äºå³åŒºé—´ï¼Œå› æ­¤æ­¤æ—¶rightæ˜¯2ï¼Œæ— éœ€å†ç¡®å®šiçš„åˆ’åˆ†åŒºé—´
        if (nums[i] == 0) {
            swap(nums[i++], nums[++left]);
        } else if (nums[i] == 1) {
            i++;
        } else {
            swap(nums[i], nums[--right]);
        }
    }
}
```

> å…¶å®å†™å‡ºä¸¤ç§å†™æ³•åªæ˜¯ä¸ºäº†è¯´æ˜ï¼Œleft åˆå§‹åŒ–ä¸º -1 è¿˜æ˜¯0 , right åˆå§‹åŒ–ä¸º n-1 è¿˜æ˜¯ nï¼Œéƒ½æ²¡å…³ç³»éƒ½å¯ä»¥ï¼Œåªè¦ä½ å¯¹åº”çš„å¤„ç†é€»è¾‘å†™å¯¹å°±å¥½ã€‚ï¼ˆä½ ç”šè‡³å¯ä»¥è‡ªç”±ç»„åˆå†™å‡ºå››ç§å†™æ³•ï¼Œåªè¦ä½ æ„¿æ„ğŸ¤ªï¼‰

#### å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼šO(n)  

- ç©ºé—´å¤æ‚åº¦ï¼šO(1)

### :fire:[347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/)

#### **é¢˜æ„**

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„

**è¿›é˜¶ï¼š**ä½ æ‰€è®¾è®¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ **å¿…é¡»** ä¼˜äº O(nlogn) ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„å¤§å°ã€‚

#### æ³•ä¸€

==:star: **æ ¸å¿ƒæ€è·¯ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆå°æ ¹å †ï¼‰  **:star:==

**:key:  keyï¼š**

- ç”¨å°æ ¹å †è¿˜æ˜¯å¤§æ ¹å †ï¼Ÿ
    - å°æ ¹å †. (æ—¶é—´å¤æ‚åº¦:éå†O(n), å †æ“ä½œæ˜¯O(logk), æ€»çš„æ˜¯O(nlogk))
    - å¦‚æœç”¨å¤§æ ¹å †ï¼Œé‚£ä¹ˆæ¯pushä¸€ä¸ªå…ƒç´ å°±ä¼špopä¸€ä¸ªå †é¡¶æœ€å¤§å…ƒç´ 
    - å› æ­¤æˆ‘ä»¬éœ€è¦å°æ ¹å †ç•™ä¸‹é¢‘æ¬¡æœ€å¤§çš„å‰kä¸ªå…ƒç´ 

- æ¨¡æ¿å£°æ˜ï¼š`priority_queue<Type, Container, Functional>`

    - Typeè¦å­˜æ”¾çš„æ•°æ®ç±»å‹
    - Containerä¿å­˜æ•°æ®çš„å®¹å™¨ï¼Œé»˜è®¤æ˜¯vector<int>
    - Functionalå…ƒç´ æ¯”è¾ƒæ–¹å¼(è°“è¯)ï¼Œå½“æ•°æ®ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œé»˜è®¤æ˜¯å¤§é¡¶å †less<>ï¼Œè‹¥ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶åˆ™éœ€è¦è‡ªå®šä¹‰æ¯”è¾ƒæ–¹å¼ã€‚
- å‡ ä¸ªæ¥å£
    - push() æˆ–emplace() is better
    - top()ï¼Œå–å †é¡¶å…ƒç´  

**:small_red_triangle_down:  steps: **

1.  ç»Ÿè®¡å…ƒç´ å‡ºç°é¢‘ç‡
2.  å®šä¹‰ä¸€ä¸ªç”¨ä¼˜å…ˆé˜Ÿåˆ—å®ç°çš„å°æ ¹å †
3.  ç”¨å›ºå®šå¤§å°çš„å°æ ¹å †æ‰«ææ‰€æœ‰å…ƒç´ 
    - å…ƒç´ å…¥é˜Ÿ
    - å¦‚æœå †å¤§å°è¶…è¿‡kåˆ™å¼¹å‡ºæœ€å°å…ƒç´ 
4.  ä¸æ–­popå¾—åˆ°å‰Kä¸ªé¢‘æ¬¡æœ€é«˜çš„å…ƒç´ 

##### ä»£ç 

```c++
class compare {
public:
    bool operator() (const pair<int, int>& a, const pair<int, int>& b) {
        return a.second > b.second; // priority_queueçš„æ¯”è¾ƒå™¨æ¯”è¾ƒç‰¹æ®Š
    }
};
class Solution {
public:
    vector<int> topKFrequent(vector<int>& nums, int k) {
        unordered_map<int, int> freq; 
        for (int& val : nums) {
            freq[val]++;
        } 
        priority_queue<pair<int, int>, vector<pair<int, int>>, compare> pri_que; 
        for (auto& p : freq) {
            pri_que.emplace(p);
            if (pri_que.size() > k) {
                pri_que.pop();
            }
        }
        vector<int> res(k);
        while (k > 0) {
            res[--k] = pri_que.top().first;
            pri_que.pop();
        }
        return res;
    }
};
```

##### å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼šO(nlogk)ã€‚éå†å…ƒç´ O(n)çš„åŒæ—¶è¿›è¡Œå †æ“ä½œO(logâ¡k)

- ç©ºé—´å¤æ‚åº¦ï¼šO(n)ã€‚å“ˆå¸Œmapçš„ç©ºé—´ä¸ºO(n)ï¼Œå †æ‰€å ç©ºé—´ä¸ºO(k)ã€‚

#### æ³•äºŒ

==:star: **æ ¸å¿ƒæ€è·¯ï¼šå †æ’åºï¼ˆæ‰‹å†™å¤§æ ¹å †ï¼‰  **:star:==

  

#### æ³•ä¸‰

==:star: **æ ¸å¿ƒæ€è·¯ï¼šäºŒè·¯å¿«æ’   **:star:==



```c++
#include <iostream>
#include <vector>
#include <unordered_map>
#include <algorithm>

using namespace std;

// å®šä¹‰å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹ï¼Œå…¶ä¸­firstè¡¨ç¤ºæ•°å­—ï¼Œsecondè¡¨ç¤ºè¯¥æ•°å­—çš„å‡ºç°æ¬¡æ•°
typedef pair<int, int> Pair;

// è¾…åŠ©å‡½æ•°ï¼Œç”¨äºäº¤æ¢ä¸¤ä¸ªPairå¯¹è±¡
void swapPair(Pair& a, Pair& b) {
    Pair temp = a;
    a = b;
    b = temp;
}

// å®šä¹‰äºŒè·¯å¿«æ’çš„åˆ’åˆ†å‡½æ•°ï¼Œæ ¹æ®å…ƒç´ å‡ºç°æ¬¡æ•°è¿›è¡Œåˆ’åˆ†
int partition(vector<Pair>& counts, int low, int high) {
    // é€‰å–ä¸­é—´å…ƒç´ ä½œä¸ºpivot
    Pair pivot = counts[high];
    // iæŒ‡å‘å°äºpivotçš„å…ƒç´ çš„æœ€åä¸€ä¸ªä½ç½®
    int i = low - 1;

    // ä»lowåˆ°high-1éå†å…ƒç´ 
    for (int j = low; j <= high - 1; j++) {
        // å¦‚æœå½“å‰å…ƒç´ çš„å‡ºç°æ¬¡æ•°å¤§äºç­‰äºpivotçš„å‡ºç°æ¬¡æ•°ï¼Œäº¤æ¢å…ƒç´ ä½ç½®
        if (counts[j].second >= pivot.second) {
            i++;
            swapPair(counts[i], counts[j]);
        }
    }

    // å°†pivotæ’å…¥åˆ°é€‚å½“çš„ä½ç½®
    swapPair(counts[i + 1], counts[high]);
    return i + 1;
}

// å®šä¹‰äºŒè·¯å¿«æ’å‡½æ•°ï¼Œæ ¹æ®å…ƒç´ å‡ºç°æ¬¡æ•°è¿›è¡Œé™åºæ’åº
void quickSort(vector<Pair>& counts, int low, int high) {
    if (low < high) {
        // åˆ’åˆ†æ•°ç»„ï¼Œå¹¶è·å–åˆ’åˆ†ç‚¹çš„ä½ç½®
        int pi = partition(counts, low, high); 
        // é€’å½’å¯¹åˆ’åˆ†çš„ä¸¤éƒ¨åˆ†è¿›è¡Œæ’åº
        quickSort(counts, low, pi - 1);
        quickSort(counts, pi + 1, high);
    }
}

// ä¸»å‡½æ•°ï¼Œè¿”å›é¢‘ç‡å‰ké«˜çš„å…ƒç´ 
vector<int> topKFrequent(vector<int>& nums, int k) {
    // ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°
    unordered_map<int, int> freq;
    for (int num : nums) {
        freq[num]++;
    }

    // å°†å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹å­˜å…¥vectorä¸­
    vector<pair<int, int>> counts;
    for (auto& p : freq) {
        counts.emplace_back(p);
    }

    // å¯¹vectorä¸­çš„é”®å€¼å¯¹æŒ‰ç…§å‡ºç°æ¬¡æ•°é™åºæ’åº
    quickSort(counts, 0, counts.size() - 1);

    // æå–å‡ºç°æ¬¡æ•°å‰ké«˜çš„æ•°å­—
    vector<int> result;
    for (int i = 0; i < k; i++) {
        result.emplace_back(counts[i].first);
    } 
    return result;
}

int main() {
    // ç¤ºä¾‹è¾“å…¥
    vector<int> nums = {1, 1, 1, 2, 2, 3};
    int k = 2;

    // è°ƒç”¨å‡½æ•°è·å–é¢‘ç‡å‰ké«˜çš„å…ƒç´ 
    vector<int> result = topKFrequent(nums, k);

    // è¾“å‡ºç»“æœ
    cout << "Frequency top " << k << " elements: ";
    for (int num : result) {
        cout << num << " ";
    }
    cout << endl;

    return 0;
}
```

